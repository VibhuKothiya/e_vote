import React, { useEffect } from 'react'
import PowerSettingsNewIcon from '@mui/icons-material/PowerSettingsNew';
import { adminLogOutAction } from '../redux-thunk/Admin/action/adminAction';
import { useDispatch, useSelector } from 'react-redux';
import { useNavigate } from 'react-router-dom';
import { ADMIN_LOGIN_POST_SUCCESS } from '../redux-thunk/type';

const Navbar = () => {
    const dispatch = useDispatch();
    const navigate = useNavigate();
    const {isAdminLogin} = useSelector((state) => state.admin)

    const adminLogOut = () => {
        dispatch(adminLogOutAction())
        console.log("Logout");
    }

    useEffect(() => {

        let adminLoginData = JSON.parse(localStorage.getItem("adminLoginData"))
        if (adminLoginData && adminLoginData.success) {
            dispatch({ type: ADMIN_LOGIN_POST_SUCCESS, payload: adminLoginData })
        }
    }, [])

    useEffect(() => {
        if (!isAdminLogin) {
            navigate("/")
        }
    }, [isAdminLogin])


    return (
        <>
            <div>
                <nav className="navbar " style={{ backgroundColor: '#1a257e' }}>
                    <div className="container-fluid">
                        <a className="navbar-brand ms-5"><svg width="150" height="50" viewBox="0 0 296 75" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clip-path="url(#clip0_275_121)">
                                <path d="M27.6412 30.3059H34.5515L16.2213 45.6117H86.8238L100.044 35.8185L90.7334 35.5127L93.4339 30.3059H116.265L88.3329 50.5127H0.000366211L27.6412 30.3059Z" fill="#CBCBCB" />
                                <path d="M56.7999 0L30.9417 45.6115H78.4131L93.7338 20.2068L56.7999 0Z" fill="white" />
                                <path d="M30.9417 55.1079L62.3422 75L74.5123 55.1079H30.9417Z" fill="white" />
                                <path opacity="0.47" d="M0.000366211 50.5127V53.5703H89.8332L116.265 34.5955V30.3059L88.3329 50.5127H0.000366211Z" fill="#8E8E8E" />
                            </g>
                            <path d="M135.122 30.8122V35.8417H141.876V39.0318H135.122V44.3487H142.738V47.625H131.099V27.5359H142.738V30.8122H135.122ZM158.638 35.6692V39.0605H146.452V35.6692H158.638ZM167.174 30.8122V35.8417H173.928V39.0318H167.174V44.3487H174.79V47.625H163.15V27.5359H174.79V30.8122H167.174ZM182.47 44.4349H189.08V47.625H178.446V27.5646H182.47V44.4349ZM195.661 30.8122V35.8417H202.415V39.0318H195.661V44.3487H203.277V47.625H191.638V27.5359H203.277V30.8122H195.661ZM205.956 37.5661C205.956 35.5926 206.397 33.8299 207.278 32.2779C208.179 30.7068 209.396 29.4902 210.928 28.628C212.48 27.7466 214.214 27.3059 216.13 27.3059C218.372 27.3059 220.336 27.8807 222.022 29.0303C223.708 30.1799 224.886 31.7702 225.557 33.8011H220.93C220.47 32.8431 219.819 32.1247 218.976 31.6457C218.152 31.1667 217.194 30.9272 216.102 30.9272C214.933 30.9272 213.889 31.205 212.969 31.7606C212.068 32.2971 211.36 33.0635 210.842 34.0598C210.344 35.0561 210.095 36.2249 210.095 37.5661C210.095 38.8881 210.344 40.0568 210.842 41.0723C211.36 42.0686 212.068 42.8446 212.969 43.4002C213.889 43.9367 214.933 44.205 216.102 44.205C217.194 44.205 218.152 43.9655 218.976 43.4865C219.819 42.9883 220.47 42.2602 220.93 41.3022H225.557C224.886 43.3523 223.708 44.9522 222.022 46.1018C220.355 47.2322 218.391 47.7974 216.13 47.7974C214.214 47.7974 212.48 47.3663 210.928 46.5041C209.396 45.6228 208.179 44.4061 207.278 42.8542C206.397 41.3022 205.956 39.5395 205.956 37.5661ZM242.645 27.5646V30.8122H237.299V47.625H233.276V30.8122H227.93V27.5646H242.645ZM249.604 27.5646V47.625H245.581V27.5646H249.604ZM262.891 47.8262C261.014 47.8262 259.289 47.3855 257.718 46.5041C256.147 45.6228 254.902 44.4061 253.982 42.8542C253.062 41.2831 252.603 39.5108 252.603 37.5373C252.603 35.583 253.062 33.8299 253.982 32.2779C254.902 30.7068 256.147 29.4806 257.718 28.5992C259.289 27.7179 261.014 27.2772 262.891 27.2772C264.788 27.2772 266.513 27.7179 268.065 28.5992C269.636 29.4806 270.872 30.7068 271.772 32.2779C272.692 33.8299 273.152 35.583 273.152 37.5373C273.152 39.5108 272.692 41.2831 271.772 42.8542C270.872 44.4061 269.636 45.6228 268.065 46.5041C266.493 47.3855 264.769 47.8262 262.891 47.8262ZM262.891 44.2337C264.098 44.2337 265.162 43.9655 266.082 43.429C267.001 42.8733 267.72 42.0878 268.237 41.0723C268.754 40.0568 269.013 38.8785 269.013 37.5373C269.013 36.1961 268.754 35.0274 268.237 34.0311C267.72 33.0156 267.001 32.2396 266.082 31.7031C265.162 31.1667 264.098 30.8984 262.891 30.8984C261.684 30.8984 260.611 31.1667 259.673 31.7031C258.753 32.2396 258.034 33.0156 257.517 34.0311C257 35.0274 256.741 36.1961 256.741 37.5373C256.741 38.8785 257 40.0568 257.517 41.0723C258.034 42.0878 258.753 42.8733 259.673 43.429C260.611 43.9655 261.684 44.2337 262.891 44.2337ZM293.303 47.625H289.279L280.169 33.8586V47.625H276.145V27.5359H280.169L289.279 41.331V27.5359H293.303V47.625Z" fill="white" />
                            <defs>
                                <clipPath id="clip0_275_121">
                                    <rect width="116.265" height="75" fill="white" transform="translate(0.000366211)" />
                                </clipPath>
                            </defs>
                        </svg>
                        </a>
                        <div className="div">
                        <button style={{ marginLeft: "100px", borderRadius: "12px", padding: "6px 8px", color: "rgb(18, 20, 129)" }} onClick={adminLogOut}>
                        <PowerSettingsNewIcon />
                        <span style={{ marginLeft: "9px", marginTop: "4px" }}>LOGOUT</span>
                    </button>
                        </div>
                    </div>
                </nav>
            </div>
            
        </>
    )
}

export default Navbar
